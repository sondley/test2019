{"version":3,"sources":["test/accounts.integration.test.ts"],"names":[],"mappings":"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","file":"test/accounts.integration.test.js","sourcesContent":["import * as assert from 'assert'\r\nimport {isArray} from 'util'\r\nimport {EsendexFake} from './esendexfake'\r\nimport Esendex = require('../lib/index')\r\n\r\ndescribe('Accounts Integration', function () {\r\n\r\n  var esendexFake;\r\n  var esendex;\r\n\r\n  before(function (done) {\r\n    var fakePort = process.env.PORT || 3000;\r\n    esendexFake = new EsendexFake();\r\n\r\n    esendexFake.listen(fakePort, function () {\r\n      esendex = Esendex({\r\n        host: 'localhost',\r\n        port: fakePort,\r\n        https: false\r\n      });\r\n      done();\r\n    });\r\n  });\r\n\r\n  after(function () {\r\n    esendexFake.close();\r\n  });\r\n\r\n  describe('get all accounts', function () {\r\n\r\n    var accounts;\r\n\r\n    before(function (done) {\r\n      esendex.accounts.get(null, function (err, response) {\r\n        if (err) return done(err);\r\n        accounts = response;\r\n        done();\r\n      });\r\n    });\r\n\r\n    it('should return an array of accounts', function () {\r\n      assert.ok(isArray(accounts.account));\r\n    });\r\n\r\n    it('should return an at least one account', function () {\r\n      assert.strictEqual(accounts.account.length, 1);\r\n    });\r\n\r\n    it('should return the expected account', function () {\r\n      var account = accounts.account[0];\r\n      assert.strictEqual(account.id, 'A00F0218-510D-423D-A74E-5A65342FE070');\r\n      assert.strictEqual(account.uri, 'http://api.esendex.com/v1.0/accounts/A00F0218-510D-423D-A74E-5A65342FE070');\r\n      assert.strictEqual(account.reference, 'EX0000000');\r\n      assert.strictEqual(account.label, 'EX0000000');\r\n      assert.strictEqual(account.address, '447700900654');\r\n      assert.strictEqual(account.type, 'Professional');\r\n      assert.strictEqual(account.messagesremaining, '2000');\r\n      assert.strictEqual(account.expireson, '2999-02-25T00:00:00');\r\n      assert.strictEqual(account.role, 'PowerUser');\r\n      assert.strictEqual(account.settings.uri, 'http://api.esendex.com/v1.0/accounts/A00F0218-510D-423D-A74E-5A65342FE070/settings');\r\n    });\r\n  });\r\n\r\n  describe('get single account', function () {\r\n\r\n    var account;\r\n\r\n    before(function (done) {\r\n      esendex.accounts.get({ id: '01234567-89AB-CDEF-0123-456789ABCDEF' }, function (err, response) {\r\n        if (err) return done(err);\r\n        account = response;\r\n        done();\r\n      });\r\n    });\r\n\r\n    it('should return the expected account', function () {\r\n      assert.strictEqual(account.id, 'D35FA8EB-3C12-4E8E-8DEC-8568B2F35890');\r\n      assert.strictEqual(account.uri, 'http://api.esendex.com/v1.0/accounts/D35FA8EB-3C12-4E8E-8DEC-8568B2F35890');\r\n      assert.strictEqual(account.reference, 'EX0000000');\r\n      assert.strictEqual(account.label, 'EX0000000');\r\n      assert.strictEqual(account.address, '447700900654');\r\n      assert.strictEqual(account.type, 'Professional');\r\n      assert.strictEqual(account.messagesremaining, '2000');\r\n      assert.strictEqual(account.expireson, '2999-02-25T00:00:00');\r\n      assert.strictEqual(account.role, 'PowerUser');\r\n      assert.strictEqual(account.settings.uri, 'http://api.esendex.com/v1.0/accounts/A00F0218-510D-423D-A74E-5A65342FE070/settings');\r\n    });\r\n  });\r\n\r\n});"],"sourceRoot":"../../src"}