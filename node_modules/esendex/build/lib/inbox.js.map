{"version":3,"sources":["lib/inbox.ts"],"names":["Inbox","Inbox.constructor","Inbox.get","Inbox.update","Inbox.delete"],"mappings":"AACA,0BAAwB,aACxB,CAAC,CADoC;AACrC,qBAAqB,MAErB,CAAC,CAF0B;AAW3B;IAIEA,eAAYA,MAAMA;QAChBC,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;QACrBA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,qBAASA,EAAEA,CAACA;IAChCA,CAACA;IAEDD,mBAAGA,GAAHA,UAAIA,OAAwBA,EAAEA,QAAkDA;QAAhFE,iBAYCA;QAXCA,IAAIA,GAAGA,GAAGA,OAAOA,IAAIA,OAAOA,CAACA,gBAAgBA,IAAIA,IAAIA,CAACA;QACtDA,IAAIA,IAAIA,GAAGA,GAAGA,GAAGA,aAAMA,CAACA,yBAAyBA,EAAEA,GAAGA,CAACA,GAAGA,sBAAsBA,CAACA;QAEjFA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,IAAIA,EAAEA,OAAOA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,UAACA,GAAGA,EAAEA,QAAQA;YAChFA,EAAEA,CAACA,CAACA,GAAGA,CAACA;gBAACA,MAAMA,CAACA,QAAQA,CAACA,GAAGA,CAACA,CAACA;YAE9BA,KAAIA,CAACA,MAAMA,CAACA,WAAWA,CAACA,QAAQA,EAAEA,UAAUA,GAAGA,EAAEA,MAAMA;gBACrD,EAAE,CAAC,CAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAC9B,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC;YACxC,CAAC,CAACA,CAACA;QACLA,CAACA,CAACA,CAACA;IACLA,CAACA;IAEDF,sBAAMA,GAANA,UAAOA,OAA2BA,EAAEA,QAA4BA;QAC9DG,IAAIA,IAAIA,GAAGA,aAAMA,CAACA,yBAAyBA,EAAEA,OAAOA,CAACA,EAAEA,CAACA,CAACA;QACzDA,IAAIA,KAAKA,GAAGA,EAAEA,MAAMA,EAAEA,OAAOA,CAACA,IAAIA,GAAGA,MAAMA,GAAGA,QAAQA,EAAEA,CAACA;QAEzDA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,IAAIA,EAAEA,KAAKA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,QAAQA,CAACA,CAACA;IAC9EA,CAACA;IAEDH,sBAAMA,GAANA,UAAOA,EAAEA,EAAEA,QAAQA;QACjBI,IAAIA,IAAIA,GAAGA,aAAMA,CAACA,yBAAyBA,EAAEA,EAAEA,CAACA,CAACA;QAEjDA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,QAAQA,CAACA,CAACA;IAChFA,CAACA;;IACHJ,YAACA;AAADA,CAnCA,AAmCCA,IAAA;AAnCY,aAAK,QAmCjB,CAAA","file":"lib/inbox.js","sourcesContent":["import {Client} from './client'\r\nimport {XmlParser} from './xmlparser'\r\nimport {format} from 'util'\r\n\r\nexport declare interface InboxGetOptions {\r\n  accountreference?: string\r\n}\r\n\r\nexport declare interface InboxUpdateOptions {\r\n  id: string\r\n  read?: boolean\r\n}\r\n\r\nexport class Inbox {\r\n  private client: Client;\r\n  private parser: XmlParser;\r\n  \r\n  constructor(client) {\r\n    this.client = client;\r\n    this.parser = new XmlParser();\r\n  }\r\n\r\n  get(options: InboxGetOptions, callback: (err: any, messageheaders?: any) => void) {\r\n    var ref = options && options.accountreference || null;\r\n    var path = ref ? format('/v1.0/inbox/%s/messages', ref) : '/v1.0/inbox/messages';\r\n  \r\n    this.client.requesthandler.request('GET', path, options, null, 200, (err, response) => {\r\n      if (err) return callback(err);\r\n  \r\n      this.parser.parseString(response, function (err, result) {\r\n        if (err) return callback(err);\r\n        callback(null, result.messageheaders);\r\n      });\r\n    });\r\n  }\r\n\r\n  update(options: InboxUpdateOptions, callback: (err: any) => void) {\r\n    var path = format('/v1.0/inbox/messages/%s', options.id);\r\n    var query = { action: options.read ? 'read' : 'unread' };\r\n  \r\n    this.client.requesthandler.request('PUT', path, query, null, 200, callback);\r\n  }\r\n\r\n  delete(id, callback) {\r\n    var path = format('/v1.0/inbox/messages/%s', id);\r\n  \r\n    this.client.requesthandler.request('DELETE', path, null, null, 200, callback);\r\n  };\r\n}"],"sourceRoot":"../../src"}