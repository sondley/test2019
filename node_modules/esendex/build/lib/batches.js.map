{"version":3,"sources":["lib/batches.ts"],"names":["Batches","Batches.constructor","Batches.get","Batches.cancel","Batches.rename"],"mappings":"AACA,0BAAwB,aACxB,CAAC,CADoC;AACrC,2BAAyB,cACzB,CAAC,CADsC;AACvC,qBAAqB,MAErB,CAAC,CAF0B;AAE3B;IAKEA,iBAAYA,MAAcA;QACxBC,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;QACrBA,IAAIA,CAACA,OAAOA,GAAGA,IAAIA,uBAAUA,CAACA,cAAcA,CAACA,CAACA;QAC9CA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,qBAASA,EAAEA,CAACA;IAChCA,CAACA;IAEDD,qBAAGA,GAAHA,UAAIA,OAAOA,EAAEA,QAAQA;QAArBE,iBASCA;QARCA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,sBAAsBA,EAAEA,OAAOA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,UAACA,GAAGA,EAAEA,QAAQA;YAClGA,EAAEA,CAACA,CAACA,GAAGA,CAACA;gBAACA,MAAMA,CAACA,QAAQA,CAACA,GAAGA,CAACA,CAACA;YAE9BA,KAAIA,CAACA,MAAMA,CAACA,WAAWA,CAACA,QAAQA,EAAEA,UAAUA,GAAGA,EAAEA,MAAMA;gBACrD,EAAE,CAAC,CAAC,GAAG,CAAC;oBAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBAC9B,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC;YACxC,CAAC,CAACA,CAACA;QACLA,CAACA,CAACA,CAACA;IACLA,CAACA;;IAEDF,wBAAMA,GAANA,UAAOA,OAAOA,EAAEA,QAAQA;QACtBG,IAAIA,IAAIA,GAAGA,aAAMA,CAACA,yBAAyBA,EAAEA,OAAOA,CAACA,CAACA;QAEtDA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,QAAQA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,QAAQA,CAACA,CAACA;IAChFA,CAACA;;IAEDH,wBAAMA,GAANA,UAAOA,OAAOA,EAAEA,QAAQA;QACtBI,IAAIA,IAAIA,GAAGA,aAAMA,CAACA,yBAAyBA,EAAEA,OAAOA,CAACA,EAAEA,CAACA,CAACA;QACzDA,IAAIA,aAAaA,GAAGA;YAClBA,GAAGA,EAAEA;gBACHA,KAAKA,EAAEA,4BAA4BA;aACpCA;YACDA,IAAIA,EAAEA,OAAOA,CAACA,IAAIA;SACnBA,CAACA;QACFA,IAAIA,GAAGA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,KAAKA,CAACA,aAAaA,CAACA,CAACA;QAE5CA,IAAIA,CAACA,MAAMA,CAACA,cAAcA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,QAAQA,CAACA,CAACA;IAC5EA,CAACA;;IACHJ,cAACA;AAADA,CAxCA,AAwCCA,IAAA;AAxCY,eAAO,UAwCnB,CAAA","file":"lib/batches.js","sourcesContent":["import {Client} from './client'\r\nimport {XmlParser} from './xmlparser'\r\nimport {XmlBuilder} from './xmlbuilder'\r\nimport {format} from 'util'\r\n\r\nexport class Batches {\r\n  private client: Client;\r\n  private builder: XmlBuilder;\r\n  private parser: XmlParser;\r\n  \r\n  constructor(client: Client) {\r\n    this.client = client;\r\n    this.builder = new XmlBuilder('messagebatch');\r\n    this.parser = new XmlParser();\r\n  }\r\n\r\n  get(options, callback) {\r\n    this.client.requesthandler.request('GET', '/v1.0/messagebatches', options, null, 200, (err, response) => {\r\n      if (err) return callback(err);\r\n  \r\n      this.parser.parseString(response, function (err, result) {\r\n        if (err) return callback(err);\r\n        callback(null, result.messagebatches);\r\n      });\r\n    });\r\n  };\r\n\r\n  cancel(batchId, callback) {\r\n    let path = format('/v1.0/messagebatches/%s', batchId);\r\n  \r\n    this.client.requesthandler.request('DELETE', path, null, null, 204, callback);\r\n  };\r\n  \r\n  rename(options, callback) {\r\n    let path = format('/v1.1/messagebatches/%s', options.id);\r\n    let requestObject = {\r\n      '$': {\r\n        xmlns: 'http://api.esendex.com/ns/'\r\n      },\r\n      name: options.name\r\n    };\r\n    let xml = this.builder.build(requestObject);\r\n  \r\n    this.client.requesthandler.request('PUT', path, null, xml, 204, callback);\r\n  };\r\n}"],"sourceRoot":"../../src"}